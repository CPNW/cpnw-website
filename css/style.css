/*
  Bootstrap-first approach:
  - Layout uses Bootstrap grid/utilities/components
  - Custom CSS ONLY for brand look (colors, hero styling, ad rail styling)
  - Dark/Light uses Bootstrap 5.3 data-bs-theme
*/

:root{
  --cpnw-brand:#14b8a6; /* teal */
  --cpnw-brand2:#22c55e; /* green accent */
  --cpnw-focus: 0 0 0 .25rem rgba(20,184,166,.25);
  --cpnw-radius: 1.25rem;
  --cpnw-radius2: 1.5rem;
  --cpnw-shadow: 0 12px 30px rgba(0,0,0,.35);
}

/* Smooth page background (matches your earlier dark gradient vibe) */
body{
  min-height:100vh;
  background: color-mix(in srgb, var(--bs-body-bg) 82%, rgba(0,0,0,.05));
}

/* Sticky header glass */
.cpnw-header{
  position:sticky;
  top:0;
  z-index:1030;
  backdrop-filter:saturate(140%) blur(10px);
  border-bottom:1px solid var(--bs-border-color);
  background: color-mix(in srgb, var(--bs-body-bg) 75%, transparent);
}

/* Logo image */
.cpnw-logo{
  display:block;
  height:48px;
  width:auto;
}
@media (max-width: 575.98px){
  .cpnw-logo{height:40px;}
}

/* Buttons that match the earlier rounded look */
.btn-cpnw{
  border-radius: .9rem;
  font-weight: 700;
  letter-spacing: .01em;
}
.btn-cpnw-primary{
  border: 0;
  color: #07101e;
  background: linear-gradient(135deg, rgba(20,184,166,.95), rgba(34,197,94,.90));
  box-shadow: 0 14px 30px rgba(20,184,166,.18);
}
.btn-cpnw-primary:hover{filter:saturate(1.05) brightness(1.02);}

.btn:focus-visible{box-shadow: var(--cpnw-focus) !important;}

/* Hero panel */
.cpnw-hero{
  border: 1px solid var(--bs-border-color);
  border-radius: var(--cpnw-radius2);
  box-shadow: var(--cpnw-shadow);
  overflow:hidden;
  position:relative;
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--bs-body-bg) 30%, #0f1b33 70%),
    color-mix(in srgb, var(--bs-body-bg) 55%, #0f1b33 45%)
  );
}
[data-bs-theme="light"] .cpnw-hero{
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(242,245,251,.92));
  box-shadow: 0 12px 30px rgba(11,18,32,.10);
}
.cpnw-hero::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(900px 400px at 20% 0%, rgba(20,184,166,.30), transparent 60%),
    radial-gradient(700px 350px at 85% 30%, rgba(34,197,94,.18), transparent 55%);
  pointer-events:none;
}

.cpnw-kicker{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  padding:.45rem .75rem;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--bs-body-color) 12%, transparent);
  background: color-mix(in srgb, var(--bs-body-bg) 65%, transparent);
  color: color-mix(in srgb, var(--bs-body-color) 70%, transparent);
  font-size: .85rem;
  width: fit-content;
}
.cpnw-dot{
  width:8px; height:8px; border-radius:999px;
  background: var(--cpnw-brand);
  box-shadow: 0 0 0 4px rgba(20,184,166,.12);
}

/* Hero art */
.cpnw-hero-art{
  display:flex;
  justify-content:center;
}
.cpnw-dandelion{
  max-width:260px;
  height:auto;
  filter: drop-shadow(0 12px 20px rgba(0,0,0,.25));
  opacity:0.9;
  animation: cpnw-float 12s ease-in-out infinite alternate;
  transform-origin: 50% 45%;
}
@keyframes cpnw-float{
  0%{transform: translate(-6px, 0px) rotate(0deg) scale(1);}
  40%{transform: translate(4px, -14px) rotate(-3deg) scale(1.015);}
  70%{transform: translate(8px, 8px) rotate(3deg) scale(0.99);}
  100%{transform: translate(-6px, 12px) rotate(-2deg) scale(1.005);}
}
@media (prefers-reduced-motion: reduce){
  .cpnw-dandelion{
    animation: none;
  }
}

/* Brand spores watermark */
.cpnw-spores{
  position:absolute;
  top:-30px;
  right:-40px;
  width:240px;
  opacity:0.12;
  mix-blend-mode:screen;
  pointer-events:none;
}
@media (max-width: 767.98px){
  .cpnw-spores{
    width:180px;
    right:-20px;
    top:-10px;
  }
}

.cpnw-services-spores{
  width:100%;
  max-width:460px;
  height:auto;
  opacity:0.78;
  filter:
    drop-shadow(0 18px 34px rgba(0,0,0,.40))
    saturate(1.05);
  mix-blend-mode:screen;
  animation: cpnw-float 16s ease-in-out infinite alternate;
  transform-origin: 50% 45%;
  pointer-events:none;
  user-select:none;
}
[data-bs-theme="light"] .cpnw-services-spores{
  /* Screen blending disappears on light backgrounds; use multiply for a true watermark feel. */
  mix-blend-mode:multiply;
  opacity:0.38;
  filter:
    drop-shadow(0 10px 18px rgba(11,18,32,.16))
    saturate(.9)
    contrast(1.22);
}
.cpnw-services-art{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height: 220px;
}
.cpnw-accordion .accordion-item{
  border: 1px solid rgba(255,255,255,.08);
  background:
    radial-gradient(140% 110% at 18% 15%, rgba(20,184,166,.18), transparent 55%),
    radial-gradient(120% 100% at 85% 0%, rgba(34,197,94,.14), transparent 50%),
    linear-gradient(165deg, rgba(19,33,54,.78) 0%, rgba(12,21,38,.85) 70%);
  background-blend-mode: screen, screen, normal;
  border-radius: var(--cpnw-radius2);
  overflow: hidden;
}
.cpnw-accordion .accordion-item + .accordion-item{
  margin-top: .75rem;
}
.cpnw-accordion .accordion-button{
  background: transparent;
  color: inherit;
  padding: .95rem 1rem;
}
.cpnw-accordion .accordion-button:not(.collapsed){
  box-shadow: none;
}
.cpnw-accordion .accordion-button:focus{
  box-shadow: 0 0 0 .2rem rgba(20,184,166,.22);
}
.cpnw-accordion .accordion-body{
  padding: 0 1rem 1rem;
}
[data-bs-theme="light"] .cpnw-accordion .accordion-item{
  border: 1px solid rgba(11,18,32,.12);
  background:
    radial-gradient(140% 110% at 18% 15%, rgba(20,184,166,.14), transparent 55%),
    radial-gradient(120% 100% at 85% 0%, rgba(34,197,94,.10), transparent 50%),
    linear-gradient(165deg, rgba(244,248,255,.92) 0%, rgba(223,233,245,.96) 70%);
  background-blend-mode: screen, screen, normal;
  box-shadow: 0 10px 22px rgba(11,18,32,.08), inset 0 1px 0 rgba(255,255,255,.75);
}
[data-bs-theme="light"] .cpnw-accordion .accordion-button:focus{
  box-shadow: 0 0 0 .2rem rgba(20,184,166,.28);
}
@media (prefers-reduced-motion: reduce){
  .cpnw-services-spores{
    animation: none;
  }
}

/* Dashboard nav */
.cpnw-nav-panel{
  border:1px solid var(--bs-border-color);
  border-radius: var(--cpnw-radius2);
  background: color-mix(in srgb, var(--bs-body-bg) 70%, transparent);
  box-shadow: 0 8px 20px rgba(0,0,0,.18);
  padding:1rem;
}
.cpnw-nav-section + .cpnw-nav-section{
  margin-top:1rem;
  padding-top:1rem;
  border-top:1px solid color-mix(in srgb, var(--bs-border-color) 80%, transparent);
}
.cpnw-nav-title{
  font-size:.8rem;
  letter-spacing:.06em;
  text-transform:uppercase;
  color: color-mix(in srgb, var(--bs-body-color) 70%, transparent);
  margin-bottom:.5rem;
}
.cpnw-nav-link{
  display:flex;
  align-items:center;
  gap:.5rem;
  padding:.45rem .65rem;
  border-radius:.75rem;
  text-decoration:none;
  color: inherit;
  transition: background .15s ease, color .15s ease;
}
.cpnw-nav-link:hover{
  background: color-mix(in srgb, var(--bs-body-color) 6%, transparent);
  color: var(--bs-body-color);
}
.cpnw-nav-sub{
  margin-left:.5rem;
}
.cpnw-nav-sub .cpnw-nav-link{
  padding-left:1rem;
}
.cpnw-nav-pill{
  width:6px;
  height:6px;
  border-radius:50%;
  background: var(--cpnw-brand);
  box-shadow: 0 0 0 3px rgba(20,184,166,.15);
}

/* Card/section shell */
.cpnw-shell{
  border:1px solid rgba(255,255,255,.06);
  border-radius: var(--cpnw-radius2);
  background:
    radial-gradient(140% 110% at 18% 15%, rgba(20,184,166,.32), transparent 55%),
    radial-gradient(120% 100% at 85% 0%, rgba(34,197,94,.24), transparent 50%),
    linear-gradient(165deg, #132136 0%, #0c1526 70%);
  background-blend-mode: screen, screen, normal;
  box-shadow: 0 16px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
}
[data-bs-theme="light"] .cpnw-shell{
  box-shadow: 0 12px 28px rgba(11,18,32,.14), inset 0 1px 0 rgba(255,255,255,.6);
  background:
    radial-gradient(140% 110% at 18% 15%, rgba(20,184,166,.20), transparent 55%),
    radial-gradient(120% 100% at 85% 0%, rgba(34,197,94,.16), transparent 50%),
    linear-gradient(165deg, #f4f8ff 0%, #dfe9f5 70%);
  background-blend-mode: screen, screen, normal;
}

/* Inner sections (cards within cards) use a lighter, glassy pill style */
.cpnw-shell .cpnw-shell,
.cpnw-shell-inner{
  border:1px solid rgba(255,255,255,.10);
  background:
    linear-gradient(165deg,
      color-mix(in srgb, rgba(20,184,166,.65), rgba(34,197,94,.45)),
      color-mix(in srgb, rgba(20,184,166,.55), rgba(34,197,94,.35))
    );
  box-shadow: inset 0 1px 0 rgba(255,255,255,.12), 0 8px 18px rgba(0,0,0,.18);
}
[data-bs-theme="light"] .cpnw-shell .cpnw-shell,
[data-bs-theme="light"] .cpnw-shell-inner{
  border:1px solid rgba(20,184,166,.18);
  background:
    linear-gradient(165deg,
      color-mix(in srgb, rgba(20,184,166,.50), rgba(34,197,94,.32)),
      color-mix(in srgb, rgba(20,184,166,.42), rgba(34,197,94,.28))
    );
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 8px 18px rgba(11,18,32,.12);
}

.cpnw-table td,
.cpnw-table th{
  background-color: transparent !important;
  border-color: color-mix(in srgb, var(--bs-border-color) 70%, transparent);
}
.cpnw-table tbody tr + tr{
  border-top: 1px solid color-mix(in srgb, var(--bs-border-color) 60%, transparent);
}

.cpnw-table-compact{
  font-size: 0.875rem;
}
.cpnw-table-compact td,
.cpnw-table-compact th{
  padding-top: 0.4rem;
  padding-bottom: 0.4rem;
}
.cpnw-table-compact .btn{
  padding: 0.2rem 0.45rem;
}
.cpnw-table-compact .btn-sm,
.cpnw-table-compact .btn-group-sm > .btn{
  font-size: 0.75rem;
}
.cpnw-cell-tight{
  max-width: 160px;
  line-height: 1.15;
  word-break: break-word;
  hyphens: auto;
}

.cpnw-table.reviewer-attention-table tbody tr + tr{
  border-top: 2px solid #fff;
}

[data-bs-theme="light"] .cpnw-table.reviewer-attention-table tbody tr + tr{
  border-top: 2px solid #b8bec6;
}


/* Ad rail */
.cpnw-ad{
  position: sticky;
  top: 96px;
  border-radius: var(--cpnw-radius2);
  border: 1px dashed color-mix(in srgb, var(--bs-body-color) 20%, transparent);
  background: color-mix(in srgb, var(--bs-body-bg) 70%, transparent);
  box-shadow: 0 10px 24px rgba(0,0,0,.22);
}
.cpnw-ad-rotator{
  position: relative;
  height: 320px;
  border-radius: 1.15rem;
  border:1px solid color-mix(in srgb, var(--bs-body-color) 14%, transparent);
  overflow: hidden;
}
.cpnw-ad-slide{
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity .6s ease;
  display:flex;
}
.cpnw-ad-slide-active{
  opacity: 1;
}
.cpnw-ad-slot-img{
  width:100%;
  height:100%;
  object-fit: cover;
}

@media (max-width: 991.98px){
  .cpnw-ad{position:relative; top:auto;}
  .cpnw-ad-rotator{height: 180px;}
}

/* Footer */
.cpnw-footer{
  border-top: 1px solid var(--bs-border-color);
  color: color-mix(in srgb, var(--bs-body-color) 70%, transparent);
}
.cpnw-footer-inner{
  max-width: 860px;
  margin-left: auto;
  margin-right: auto;
}

/* School/program multi-select */
.cpnw-program-filter{
  position: relative;
}
.cpnw-program-filter .form-control{
  cursor: pointer;
  text-overflow: ellipsis;
  overflow: hidden;
}
.cpnw-program-filter.is-open .cpnw-program-menu{
  display: block;
}
.cpnw-program-menu{
  position: absolute;
  top: calc(100% + .35rem);
  left: 0;
  min-width: 100%;
  max-width: 320px;
  background: var(--bs-body-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: .75rem;
  padding: .5rem;
  box-shadow: var(--cpnw-shadow);
  overflow: visible;
  display: none;
  z-index: 1050;
}
.cpnw-program-menu-list{
  overflow: visible;
}
.cpnw-program-filter-scroll .cpnw-program-menu-list{
  max-height: 260px;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: .25rem;
}
.cpnw-program-filter-sm .cpnw-program-menu{
  min-width: 220px;
}
.cpnw-program-school{
  position: relative;
  padding: .35rem .5rem;
  border-radius: .5rem;
}
.cpnw-program-school::before{
  content: "";
  position: absolute;
  top: 0;
  right: -.6rem;
  width: .6rem;
  height: 100%;
}
.cpnw-program-school + .cpnw-program-school{
  margin-top: .25rem;
}
.cpnw-program-school:hover{
  background: color-mix(in srgb, var(--bs-body-bg) 85%, var(--cpnw-brand) 15%);
}
.cpnw-program-school::after{
  content: ">";
  position: absolute;
  right: .5rem;
  top: 50%;
  transform: translateY(-50%);
  color: color-mix(in srgb, var(--bs-body-color) 70%, transparent);
}
.cpnw-program-cohort-filter .cpnw-program-school::after{
  content: "";
}
.cpnw-program-submenu{
  position: absolute;
  left: calc(100% + .6rem);
  top: 0;
  min-width: 240px;
  max-height: 260px;
  overflow: visible;
  background: var(--bs-body-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: .75rem;
  padding: .5rem;
  box-shadow: var(--cpnw-shadow);
  display: none;
  z-index: 1060;
}
.cpnw-program-submenu-list{
  max-height: 260px;
  overflow-y: auto;
  overflow-x: visible;
}
.cpnw-program-submenu-secondary{
  min-width: 240px;
  max-width: 320px;
}
.cpnw-program-school:hover > .cpnw-program-submenu,
.cpnw-program-school:focus-within > .cpnw-program-submenu{
  display: block;
}
.cpnw-program-menu .form-check{
  margin: 0;
  padding-left: 0;
}
.cpnw-program-school .form-check{
  display: flex;
  align-items: center;
  gap: .5rem;
}
.cpnw-program-menu .form-check-input{
  margin-left: 0;
  margin-right: 0;
}
.cpnw-program-item{
  display: flex;
  align-items: center;
  gap: .45rem;
  padding: .2rem .25rem;
  border-radius: .4rem;
}
.cpnw-program-item.has-submenu{
  position: relative;
  padding-right: 1.6rem;
}
.cpnw-program-item.has-submenu::after{
  content: ">";
  position: absolute;
  right: .4rem;
  top: 50%;
  transform: translateY(-50%);
  color: color-mix(in srgb, var(--bs-body-color) 70%, transparent);
}
.cpnw-program-item.has-submenu > .cpnw-program-submenu{
  left: calc(100% + .6rem);
  top: 0;
  display: none;
}
.cpnw-program-item.has-submenu:hover > .cpnw-program-submenu,
.cpnw-program-item.has-submenu:focus-within > .cpnw-program-submenu{
  display: block;
}
.cpnw-program-cohort-filter .cpnw-program-menu{
  min-width: 560px;
  max-width: 680px;
}
.cpnw-program-cohort-grid{
  display: flex;
  gap: .75rem;
}
.cpnw-program-cohort-left,
.cpnw-program-cohort-right{
  flex: 1 1 0;
  min-width: 0;
  max-height: 320px;
  overflow-y: auto;
  border: 1px solid var(--bs-border-color);
  border-radius: .65rem;
  padding: .5rem;
  background: var(--bs-body-bg);
}
.cpnw-program-cohort-right{
  position: relative;
}
.cpnw-program-cohort-empty{
  padding: .5rem .25rem;
}
.cpnw-program-school-programs{
  margin-top: .35rem;
  padding-left: 1.5rem;
  display: none;
}
.cpnw-program-school.is-expanded .cpnw-program-school-programs{
  display: block;
}
.cpnw-program-program{
  padding: .2rem .25rem;
  border-radius: .4rem;
}
.cpnw-program-program:hover{
  background: color-mix(in srgb, var(--bs-body-bg) 88%, var(--cpnw-brand) 12%);
}
.cpnw-program-program.is-active{
  background: color-mix(in srgb, var(--bs-body-bg) 88%, var(--cpnw-brand) 12%);
}
.cpnw-program-cohort-list{
  display: none;
}
.cpnw-program-cohort-list.is-active{
  display: block;
}
.cpnw-program-item:hover{
  background: color-mix(in srgb, var(--bs-body-bg) 88%, var(--cpnw-brand) 12%);
}
.cpnw-program-empty{
  padding: .5rem .25rem;
}
@media (max-width: 767.98px){
  .cpnw-program-submenu{
    position: static;
    margin-top: .35rem;
    box-shadow: none;
  }
  .cpnw-program-school::after{
    content: "";
  }
  .cpnw-program-filter-scroll .cpnw-program-menu-list{
    max-height: 220px;
  }
  .cpnw-program-cohort-filter .cpnw-program-menu{
    min-width: 100%;
    max-width: none;
  }
  .cpnw-program-cohort-grid{
    flex-direction: column;
  }
  .cpnw-program-cohort-left,
  .cpnw-program-cohort-right{
    max-height: 240px;
  }
}

/* Skip link */
.cpnw-skip{
  position:absolute;
  left:-9999px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
}
.cpnw-skip:focus{
  left:1rem;
  top:.75rem;
  width:auto;
  height:auto;
  padding:.6rem .8rem;
  border-radius:.75rem;
  background: color-mix(in srgb, var(--bs-body-bg) 92%, transparent);
  border:1px solid var(--bs-border-color);
  z-index:9999;
  box-shadow: var(--cpnw-shadow);
}

/* Utility tweaks pulled from former inline styles */
.cpnw-ls-06{letter-spacing:.06em;}
.cpnw-ls-08{letter-spacing:.08em;}
.cpnw-ls-neg-02{letter-spacing:-.02em;}
.cpnw-fs-90{font-size:.9rem;}
.cpnw-fs-75{font-size:.75rem;}
.cpnw-maxw-54ch{max-width:54ch;}
.cpnw-table-head{
  z-index: 2;
  background: color-mix(in srgb, var(--bs-body-bg) 92%, rgba(20,184,166,.12));
}
.cpnw-scroll-420{max-height:420px; overflow-y:auto;}
.cpnw-scroll-360{max-height:360px; overflow-y:auto;}
.cpnw-scroll-260{max-height:260px; overflow-y:auto;}
.cpnw-scroll-240{max-height:240px; overflow-y:auto;}
.cpnw-scroll-220{max-height:220px; overflow:auto;}
.cpnw-scroll-200{max-height:200px; overflow-y:auto;}
.cpnw-dropdown-menu-260{
  min-width:260px;
  max-height:320px;
  overflow-y:auto;
}
.cpnw-dropdown-menu-240{min-width:240px;}
.cpnw-dropdown-menu-280{min-width:280px;}
.cpnw-maxw-260{max-width:260px;}
.cpnw-maxw-320{max-width:320px;}
.cpnw-w-min-340{width:min(340px, 70vw);}
.cpnw-w-min-320{width:min(320px, 70vw);}
.cpnw-profile-frame{width:160px; height:200px;}
.cpnw-object-cover{object-fit:cover;}
.cpnw-top-1{top:1rem;}
.cpnw-modal-header{background:var(--bs-body-bg);}
.cpnw-modal-header-sticky{
  background:var(--bs-body-bg);
  z-index:5;
}
.cpnw-z-5{z-index:5;}
.cpnw-doc-preview{
  width:120px;
  height:140px;
  background: url("../images/spores-watermark.png") center/60% no-repeat;
}
.cpnw-col-44{width:44px;}
.cpnw-thread-box{
  max-height:220px;
  overflow:auto;
  background: color-mix(in srgb, var(--bs-body-bg) 80%, transparent);
}
.cpnw-size-40{width:40px; height:40px;}
.cpnw-size-56{width:56px;}
.cpnw-maxw-70{max-width:70%;}
