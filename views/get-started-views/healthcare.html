<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CPNW â€” Get Started (Healthcare)</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="../../css/style.css" />
</head>
<body>
  <header class="cpnw-header">
    <nav class="navbar navbar-expand-md py-2" aria-label="Primary">
      <div class="container">
        <a
          class="navbar-brand d-flex align-items-center"
          href="../../index.html"
          aria-label="CPNW Home"
        >
          <img
            class="cpnw-logo"
            src="../../images/CPNWLogoo.png"
            alt="Clinical Placements Northwest"
          />
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#nav"
          aria-controls="nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav mx-auto gap-md-2">
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="getStartedDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Get Started
              </a>
              <ul class="dropdown-menu" aria-labelledby="getStartedDropdown">
                <li><a class="dropdown-item" href="schools.html">Schools</a></li>
                <li><a class="dropdown-item" href="#get-started-students" data-student-get-started-trigger>Students</a></li>
                <li><a class="dropdown-item" href="healthcare.html">Healthcare</a></li>
              </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="../../index.html#faq">FAQ</a></li>
          </ul>

          <div class="d-flex align-items-center gap-2">
            <button
              data-theme-toggle
              type="button"
              class="btn btn-cpnw btn-cpnw-primary btn-sm"
              aria-label="Toggle dark and light mode"
            >
              <span class="me-1" aria-hidden="true" data-theme-icon>ðŸŒ™</span>
              <span class="fw-bold" data-theme-label>Dark</span>
            </button>
            <a class="btn btn-cpnw btn-cpnw-primary btn-sm" href="../../index.html#login" id="loginTrigger">
              Login
            </a>
            <a class="btn btn-sm btn-cpnw btn-cpnw-primary" href="../../index.html#register">
              Register
            </a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main class="py-4 py-lg-5">
    <div class="container position-relative">
      <img src="../../images/spores-watermark.png" class="cpnw-spores" alt="" aria-hidden="true" />

      <div class="d-flex flex-wrap justify-content-between align-items-end gap-3 mb-4">
        <div>
          <p class="text-uppercase fw-bold cpnw-ls-08 cpnw-fs-75 mb-1">Get Started</p>
          <h1 class="h3 fw-semibold mb-1">Healthcare</h1>
          <p class="text-body-secondary mb-0">
            Tell us about your facility so we can set up your partner account and services.
          </p>
        </div>
        <a class="btn btn-outline-secondary btn-sm btn-cpnw" href="../../index.html">Back to Home</a>
      </div>

      <div class="cpnw-shell p-3 p-md-4">
        <h2 class="h5 fw-bold mb-1">Healthcare Partner Form</h2>
        <p class="text-body-secondary small mb-4">
          Demo form modeled after <code>dev.cpnw.org/GetStarted/HealthcareForm</code>.
        </p>

        <form id="healthcareGetStartedForm" novalidate>
          <section class="cpnw-shell p-3 p-md-4 mb-3">
            <h3 class="h6 fw-bold mb-2">Healthcare Facility Information</h3>
            <p class="text-body-secondary small mb-3">
              Please complete the required information for your organization. This information will be used for official correspondence
              from CPNW. The primary contact should be the individual responsible for oversight of the account you are requesting.
            </p>
            <p class="small mb-2 fw-semibold">**Required</p>

            <div class="row g-3">
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcName">Organization name <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcName" name="hcName" required />
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcAddress">Mailing address <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcAddress" name="hcAddress" required />
              </div>
              <div class="col-12 col-md-5">
                <label class="form-label" for="hcCity">City <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcCity" name="hcCity" required />
              </div>
              <div class="col-12 col-md-3">
                <label class="form-label" for="hcState">State <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcState" name="hcState" required />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label" for="hcZip">Zip <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcZip" name="hcZip" required />
              </div>

              <div class="col-12 col-md-6">
                <label class="form-label" for="hcPrimaryName">Primary contact name <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcPrimaryName" name="hcPrimaryName" required />
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcPrimaryEmail">Primary contact email <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcPrimaryEmail" name="hcPrimaryEmail" type="email" autocomplete="email" required />
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcPrimaryPhone">Primary contact phone</label>
                <input class="form-control" id="hcPrimaryPhone" name="hcPrimaryPhone" type="tel" autocomplete="tel" placeholder="(###) ###-####" />
              </div>
            </div>
          </section>

          <section class="cpnw-shell p-3 p-md-4 mb-3" aria-label="Healthcare package breakdown">
            <h3 class="h6 fw-bold mb-2">Healthcare Package Breakdown</h3>
            <p class="small mb-2 fw-semibold">**Required</p>
            <div class="small text-danger d-none" id="packageError">Please select a package.</div>

            <div class="row g-3" id="healthcarePackages">
              <div class="col-12 col-lg-6">
                <div class="cpnw-shell p-3 h-100" data-package-card tabindex="0">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="healthcarePackage" id="healthcarePackage_1" value="hp-1" />
                    <label class="form-check-label fw-semibold" for="healthcarePackage_1">
                      Affiliate: Placement Coordination Package
                    </label>
                  </div>
                  <ul class="small text-body-secondary mb-0 ps-4 mt-2">
                    <li>
                      Facility gridding support and coordination of student placements through primary point of contact through the CPNW
                      Regional Clinical Coordinator
                      <ul class="mt-1 mb-0 ps-3">
                        <li>
                          This role ensures seamless communication, accurate representation of program placement needs, and regular updates
                          to address evolving requirements. The CPNW Coordinator liaises with both education and healthcare partners to
                          ensure placements align with institutional goals and unit parameters set by the institution.
                        </li>
                      </ul>
                    </li>
                    <li>Facility grad access via the CPNW website.</li>
                    <li>
                      CPNW support of Shortfall Replacement management throughout the academic year, addressing gaps in clinical placements
                      by facilitating adjustments and reallocations in collaboration with healthcare and education partners.
                    </li>
                    <li>This package does not include Student Onboarding Support.</li>
                  </ul>
                </div>
              </div>

              <div class="col-12 col-lg-6">
                <div class="cpnw-shell p-3 h-100" data-package-card tabindex="0">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="healthcarePackage" id="healthcarePackage_2" value="hp-2" />
                    <label class="form-check-label fw-semibold" for="healthcarePackage_2">
                      Affiliate: Onboarding Package
                    </label>
                  </div>
                  <ul class="small text-body-secondary mb-0 ps-4 mt-2">
                    <li>
                      Access to CPNW website for student Onboarding support and management.
                      <ul class="mt-1 mb-0 ps-3">
                        <li>
                          Streamlined management of standardized health and safety standards (vaccination history, background checks,
                          certifications, integrated OIG/GSA checks, etc.)
                        </li>
                        <li>
                          This package includes the healthcare partnersâ€™ ability to develop and deploy their own Site-Specific Requirements
                          for student onboarding. For example, onboarding requirements can be customized to differ between Acute Care
                          settings and Ambulatory or Clinic settings, ensuring alignment with facility-specific needs.
                        </li>
                      </ul>
                    </li>
                    <li>This package does not include clinical placement coordination or facility gridding.</li>
                  </ul>
                </div>
              </div>

              <div class="col-12 col-lg-6">
                <div class="cpnw-shell p-3 h-100" data-package-card tabindex="0">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="healthcarePackage" id="healthcarePackage_3" value="hp-3" />
                    <label class="form-check-label fw-semibold" for="healthcarePackage_3">
                      Full Healthcare Package
                    </label>
                  </div>
                  <ul class="small text-body-secondary mb-0 ps-4 mt-2">
                    <li>
                      Includes full membership services for website access and onboarding services:
                      <ul class="mt-1 mb-0 ps-3">
                        <li>Clinical Placement gridding and coordination support of student placements.</li>
                        <li>Shortfall management and support.</li>
                        <li>Full website access for Student Onboarding management.</li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <section class="cpnw-shell p-3 p-md-4 mb-3" aria-label="Membership dues">
            <h3 class="h6 fw-bold mb-2">Membership Dues</h3>
            <p class="text-body-secondary small mb-3">
              The Healthcare Membership fee structure ensures continued support for enhanced services. Healthcare Membership invoicing is
              generated within the following tier system, based on the total clinical placements within the academic year.
            </p>
            <div class="table-responsive">
              <table class="table align-middle mb-0 cpnw-table">
                <thead>
                  <tr>
                    <th scope="col">Student placements</th>
                    <th scope="col">Full member total dues</th>
                    <th scope="col">Affiliate (Option 1 or 2) total dues</th>
                  </tr>
                </thead>
                <tbody id="membershipDuesBody">
                  <tr><td class="fw-semibold">1â€“25</td><td>$350.62</td><td>$292.97</td></tr>
                  <tr><td class="fw-semibold">26â€“50</td><td>$701.25</td><td>$525.94</td></tr>
                  <tr><td class="fw-semibold">51â€“75</td><td>$1,051.88</td><td>$788.91</td></tr>
                  <tr><td class="fw-semibold">76â€“100</td><td>$1,402.50</td><td>$1,051.88</td></tr>
                  <tr><td class="fw-semibold">101â€“125</td><td>$1,753.13</td><td>$1,314.84</td></tr>
                  <tr><td class="fw-semibold">126â€“150</td><td>$2,103.75</td><td>$1,577.81</td></tr>
                  <tr><td class="fw-semibold">151â€“175</td><td>$2,454.38</td><td>$1,840.78</td></tr>
                  <tr><td class="fw-semibold">176â€“200</td><td>$2,805.00</td><td>$2,103.75</td></tr>
                  <tr><td class="fw-semibold">201â€“225</td><td>$3,155.63</td><td>$2,366.72</td></tr>
                  <tr><td class="fw-semibold">226â€“250</td><td>$3,506.25</td><td>$2,629.69</td></tr>
                  <tr><td class="fw-semibold">251â€“275</td><td>$3,856.88</td><td>$2,892.66</td></tr>
                  <tr><td class="fw-semibold">276â€“300</td><td>$4,207.50</td><td>$3,155.63</td></tr>
                  <tr><td class="fw-semibold">301â€“325</td><td>$4,558.13</td><td>$3,418.59</td></tr>
                  <tr><td class="fw-semibold">326â€“350</td><td>$4,908.75</td><td>$3,681.56</td></tr>
                  <tr><td class="fw-semibold">351â€“375</td><td>$5,259.38</td><td>$3,944.53</td></tr>
                  <tr><td class="fw-semibold">376â€“400</td><td>$5,610.00</td><td>$4,207.50</td></tr>
                  <tr><td class="fw-semibold">401â€“425</td><td>$5,960.63</td><td>$4,470.47</td></tr>
                  <tr><td class="fw-semibold">426â€“450</td><td>$6,311.25</td><td>$4,733.44</td></tr>
                  <tr><td class="fw-semibold">451â€“475</td><td>$6,661.88</td><td>$4,996.41</td></tr>
                  <tr><td class="fw-semibold">476â€“500</td><td>$7,012.50</td><td>$5,259.38</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="cpnw-shell p-3 p-md-4 mb-3" aria-label="Invoicing information">
            <h3 class="h6 fw-bold mb-2">Invoicing Information</h3>
            <p class="text-body-secondary small mb-3">
              Healthcare members can expect to be invoiced by January 31st of the calendar year.
            </p>
            <p class="small mb-2 fw-semibold">**Required</p>

            <div class="row g-3">
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcInvoiceEmail">Email address to send CPNW invoice to <span class="text-body-secondary">(**Required)</span></label>
                <input class="form-control" id="hcInvoiceEmail" name="hcInvoiceEmail" type="email" autocomplete="email" required />
                <div class="invalid-feedback">Please enter a valid email address.</div>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="hcInvoiceCopyEmail">Email address to send copy of invoice to</label>
                <input class="form-control" id="hcInvoiceCopyEmail" name="hcInvoiceCopyEmail" type="email" autocomplete="email" />
                <div class="invalid-feedback">Please enter a valid email address.</div>
              </div>
              <div class="col-12">
                <p class="text-body-secondary small mb-2">
                  Please note any specific information required on CPNW invoice such as: billing, address, cost code, routing number, etc.
                </p>
                <label class="form-label" for="hcInvoiceAdditional">Additional information</label>
                <input class="form-control" id="hcInvoiceAdditional" name="hcInvoiceAdditional" placeholder="Field for additional information" />
              </div>
            </div>
          </section>

          <section class="cpnw-shell p-3 p-md-4 mb-3" aria-label="Additional facilities">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2">
              <h3 class="h6 fw-bold mb-0">Additional Healthcare Facilities</h3>
              <button type="button" class="btn btn-outline-secondary btn-sm btn-cpnw" id="addFacilityBtn">
                +Add Facility
              </button>
            </div>
            <p class="text-body-secondary small mb-3">
              If you manage multiple facilities, add them here. Each facility can select a service package and include notes.
            </p>

            <div class="d-grid gap-3" id="facilityList"></div>

            <template id="facilityTemplate">
              <div class="cpnw-shell p-3">
                <div class="d-flex justify-content-between align-items-center gap-2 mb-2">
                  <div class="fw-semibold">Healthcare Facility</div>
                  <button type="button" class="btn btn-outline-secondary btn-sm btn-cpnw" data-remove-facility>Remove</button>
                </div>
                <div class="row g-3">
                  <div class="col-12 col-md-6">
                    <label class="form-label" data-label-for="name">Healthcare Facility Name</label>
                    <input class="form-control" data-field="name" />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label" data-label-for="address">Healthcare Facility Mailing Address</label>
                    <input class="form-control" data-field="address" />
                  </div>
                  <div class="col-12">
                    <label class="form-label" data-label-for="servicePackage">Select a Service Package</label>
                    <select class="form-select" data-field="servicePackage"></select>
                  </div>
                  <div class="col-12">
                    <label class="form-label" data-label-for="additionalInfo">
                      Please use the text area below for any additional information or questions
                    </label>
                    <textarea class="form-control" rows="3" data-field="additionalInfo"></textarea>
                  </div>
                </div>
              </div>
            </template>
          </section>

          <div class="d-flex flex-wrap gap-2 justify-content-end">
            <button type="reset" class="btn btn-outline-secondary btn-sm btn-cpnw">Clear</button>
            <button type="submit" class="btn btn-cpnw btn-cpnw-primary">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <footer class="cpnw-footer py-3 py-lg-4">
    <div class="container">
      <div class="cpnw-footer-inner text-center">
        <div class="small text-body-secondary">
          Copyright Â© 2024 Clinical Placements Northwest | All rights reserved.
          <a class="text-decoration-none" href="../../terms-privacy.html">Terms of Use and Privacy Policy</a>
        </div>
        <div class="mt-2">
          <button type="button" class="btn btn-cpnw btn-cpnw-primary btn-sm" data-contact-trigger>
            Contact Us
          </button>
        </div>
      </div>
    </div>
  </footer>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
  <script src="../../js/main.js?v=20251214-2"></script>
  <script>
    (function(){
      const form = document.getElementById('healthcareGetStartedForm');
      const packagesWrap = document.getElementById('healthcarePackages');
      const packageError = document.getElementById('packageError');

      const duesBody = document.getElementById('membershipDuesBody');
      const facilityList = document.getElementById('facilityList');
      const addFacilityBtn = document.getElementById('addFacilityBtn');
      const facilityTpl = document.getElementById('facilityTemplate');

      if (!form || !packagesWrap || !duesBody || !facilityList || !addFacilityBtn || !facilityTpl) return;

      const healthcarePackages = [
        {
          id: 'hp-1',
          name: 'Affiliate: Placement Coordination Package',
          description: [
            {
              text: 'Facility gridding support and coordination of student placements through primary point of contact through the CPNW Regional Clinical Coordinator',
              nestedItems: [
                'This role ensures seamless communication, accurate representation of program placement needs, and regular updates to address evolving requirements. The CPNW Coordinator liaises with both education and healthcare partners to ensure placements align with institutional goals and unit parameters set by the institution.'
              ]
            },
            { text: 'Facility grad access via the CPNW website.' },
            {
              text: 'CPNW support of Shortfall Replacement management throughout the academic year, addressing gaps in clinical placements by facilitating adjustments and reallocations in collaboration with healthcare and education partners.'
            },
            { text: 'This package does not include Student Onboarding Support.' }
          ]
        },
        {
          id: 'hp-2',
          name: 'Affiliate: Onboarding Package',
          description: [
            {
              text: 'Access to CPNW website for student Onboarding support and management.',
              nestedItems: [
                'Streamlined management of standardized health and safety standards (vaccination history, background checks, certifications, integrated OIG/GSA checks, etc.)',
                'This package includes the healthcare partnersâ€™ ability to develop and deploy their own Site-Specific Requirements for student onboarding. For example, onboarding requirements can be customized to differ between Acute Care settings and Ambulatory or Clinic settings, ensuring alignment with facility-specific needs.'
              ]
            },
            { text: 'This package does not include clinical placement coordination or facility gridding.' }
          ]
        },
        {
          id: 'hp-3',
          name: 'Full Healthcare Package',
          description: [
            {
              text: 'Includes full membership services for website access and onboarding services:',
              nestedItems: [
                'Clinical Placement gridding and coordination support of student placements.',
                'Shortfall management and support.',
                'Full website access for Student Onboarding management.'
              ]
            }
          ]
        }
      ];

      const membershipDues = [{"studentPlacementCountMinimum":1,"studentPlacementCountMaximum":25,"fullMemberTotalDues":350.62,"option1or2AffiliateMemberTotalDues":292.97},{"studentPlacementCountMinimum":26,"studentPlacementCountMaximum":50,"fullMemberTotalDues":701.25,"option1or2AffiliateMemberTotalDues":525.94},{"studentPlacementCountMinimum":51,"studentPlacementCountMaximum":75,"fullMemberTotalDues":1051.88,"option1or2AffiliateMemberTotalDues":788.91},{"studentPlacementCountMinimum":76,"studentPlacementCountMaximum":100,"fullMemberTotalDues":1402.5,"option1or2AffiliateMemberTotalDues":1051.88},{"studentPlacementCountMinimum":101,"studentPlacementCountMaximum":125,"fullMemberTotalDues":1753.13,"option1or2AffiliateMemberTotalDues":1314.84},{"studentPlacementCountMinimum":126,"studentPlacementCountMaximum":150,"fullMemberTotalDues":2103.75,"option1or2AffiliateMemberTotalDues":1577.81},{"studentPlacementCountMinimum":151,"studentPlacementCountMaximum":175,"fullMemberTotalDues":2454.38,"option1or2AffiliateMemberTotalDues":1840.78},{"studentPlacementCountMinimum":176,"studentPlacementCountMaximum":200,"fullMemberTotalDues":2805,"option1or2AffiliateMemberTotalDues":2103.75},{"studentPlacementCountMinimum":201,"studentPlacementCountMaximum":225,"fullMemberTotalDues":3155.63,"option1or2AffiliateMemberTotalDues":2366.72},{"studentPlacementCountMinimum":226,"studentPlacementCountMaximum":250,"fullMemberTotalDues":3506.25,"option1or2AffiliateMemberTotalDues":2629.69},{"studentPlacementCountMinimum":251,"studentPlacementCountMaximum":275,"fullMemberTotalDues":3856.88,"option1or2AffiliateMemberTotalDues":2892.66},{"studentPlacementCountMinimum":276,"studentPlacementCountMaximum":300,"fullMemberTotalDues":4207.5,"option1or2AffiliateMemberTotalDues":3155.63},{"studentPlacementCountMinimum":301,"studentPlacementCountMaximum":325,"fullMemberTotalDues":4558.13,"option1or2AffiliateMemberTotalDues":3418.59},{"studentPlacementCountMinimum":326,"studentPlacementCountMaximum":350,"fullMemberTotalDues":4908.75,"option1or2AffiliateMemberTotalDues":3681.56},{"studentPlacementCountMinimum":351,"studentPlacementCountMaximum":375,"fullMemberTotalDues":5259.38,"option1or2AffiliateMemberTotalDues":3944.53},{"studentPlacementCountMinimum":376,"studentPlacementCountMaximum":400,"fullMemberTotalDues":5610,"option1or2AffiliateMemberTotalDues":4207.5},{"studentPlacementCountMinimum":401,"studentPlacementCountMaximum":425,"fullMemberTotalDues":5960.63,"option1or2AffiliateMemberTotalDues":4470.47},{"studentPlacementCountMinimum":426,"studentPlacementCountMaximum":450,"fullMemberTotalDues":6311.25,"option1or2AffiliateMemberTotalDues":4733.44},{"studentPlacementCountMinimum":451,"studentPlacementCountMaximum":475,"fullMemberTotalDues":6661.88,"option1or2AffiliateMemberTotalDues":4996.41},{"studentPlacementCountMinimum":476,"studentPlacementCountMaximum":500,"fullMemberTotalDues":7012.5,"option1or2AffiliateMemberTotalDues":5259.38}];

      function formatUSD(value){
        return new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD' }).format(Number(value || 0));
      }

      function renderDues(){
        duesBody.innerHTML = membershipDues.map((row) => {
          const range = `${row.studentPlacementCountMinimum}â€“${row.studentPlacementCountMaximum}`;
          return `\n            <tr>\n              <td class="fw-semibold">${range}</td>\n              <td>${formatUSD(row.fullMemberTotalDues)}</td>\n              <td>${formatUSD(row.option1or2AffiliateMemberTotalDues)}</td>\n            </tr>\n          `;\n        }).join('');
      }

      function renderPackages(){
        packagesWrap.innerHTML = healthcarePackages.map((p, idx) => {\n          const id = `healthcarePackage_${idx+1}`;\n          const details = (p.description || []).map((li) => {\n            const nested = (li.nestedItems || []).length\n              ? `<ul class=\"mt-1 mb-0 ps-3\">${li.nestedItems.map(n => `<li>${n}</li>`).join('')}</ul>`\n              : '';\n            return `<li>${li.text}${nested}</li>`;\n          }).join('');\n\n          return `\n            <div class=\"col-12 col-lg-6\">\n              <div class=\"cpnw-shell p-3 h-100\" data-package-card tabindex=\"0\">\n                <div class=\"form-check\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"healthcarePackage\" id=\"${id}\" value=\"${p.id}\" ${idx === 0 ? '' : ''} />\n                  <label class=\"form-check-label fw-semibold\" for=\"${id}\">${p.name}</label>\n                </div>\n                <ul class=\"small text-body-secondary mb-0 ps-4 mt-2\">${details}</ul>\n              </div>\n            </div>\n          `;\n        }).join('');
      }

      function renderFacilityCard(){
        const fragment = facilityTpl.content.cloneNode(true);
        const shell = fragment.querySelector('.cpnw-shell');
        const removeBtn = fragment.querySelector('[data-remove-facility]');
        const selects = fragment.querySelectorAll('select[data-field=\"servicePackage\"]');
        const title = fragment.querySelector('.fw-semibold');

        const index = facilityList.children.length + 1;
        if (title) title.textContent = `Healthcare Facility ${index}`;

        selects.forEach((select) => {\n          select.innerHTML = `\n            <option value=\"\" selected>Select</option>\n            ${healthcarePackages.map(p => `<option value=\"${p.id}\">${p.name}</option>`).join('')}\n          `;\n        });\n\n        if (shell){\n          shell.querySelectorAll('[data-field]').forEach((input) => {\n            const field = input.getAttribute('data-field');\n            input.name = `facilities[${index}][${field}]`;\n            input.id = `facility-${index}-${field}`;\n            const label = shell.querySelector(`[data-label-for=\"${field}\"]`);\n            if (label) label.setAttribute('for', input.id);\n          });\n        }\n\n        removeBtn?.addEventListener('click', () => {\n          shell?.remove();\n          renumberFacilities();\n        });\n\n        facilityList.appendChild(fragment);\n      }

      function renumberFacilities(){
        Array.from(facilityList.children).forEach((shell, idx) => {\n          const index = idx + 1;\n          const title = shell.querySelector('.fw-semibold');\n          if (title) title.textContent = `Healthcare Facility ${index}`;\n          shell.querySelectorAll('[data-field]').forEach((input) => {\n            const field = input.getAttribute('data-field');\n            input.name = `facilities[${index}][${field}]`;\n            input.id = `facility-${index}-${field}`;\n            const label = shell.querySelector(`[data-label-for=\"${field}\"]`);\n            if (label) label.setAttribute('for', input.id);\n          });\n        });\n      }

      function setPackageError(message){
        if (!packageError) return;
        packageError.textContent = message || 'Please select a package.';
        packageError.classList.toggle('d-none', !message);
      }

      function getSelectedHealthcarePackage(){
        return document.querySelector('input[name=\"healthcarePackage\"]:checked')?.value || '';
      }

      renderPackages();
      renderDues();

      addFacilityBtn.addEventListener('click', renderFacilityCard);

      form.addEventListener('change', (e) => {
        if (e.target && e.target.name === 'healthcarePackage') setPackageError('');
      });

      form.addEventListener('reset', () => {
        setTimeout(() => {\n          facilityList.innerHTML = '';\n          setPackageError('');\n        }, 0);\n      });

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        form.classList.add('was-validated');
\n        if (!getSelectedHealthcarePackage()){\n          setPackageError('Please select a package.');\n          document.getElementById('healthcarePackage_1')?.focus();\n          return;\n        }\n\n        if (!form.checkValidity()){\n          const firstInvalid = form.querySelector(':invalid');\n          firstInvalid?.focus();\n          return;\n        }\n\n        alert('Thanks! Your Healthcare Partner form has been submitted (demo).');\n        form.reset();\n        form.classList.remove('was-validated');\n      });
    })();
  </script>
</body>
</html>
